{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8e54c70fcca6deb062ed","webpack:///./src/base/utils.ts","webpack:///./src/base/frameworken.ts","webpack:///./src/base/component.container.ts","webpack:///./src/base/component.utils.ts","webpack:///./src/base/di.container.ts","webpack:///./src/base/directives/if.directive.ts","webpack:///./src/base/directives/registry.ts","webpack:///./src/base/directives/repeat.directive.ts","webpack:///./src/base/module.ts","webpack:///./src/base/router.ts","webpack:///./src/base/events/pubsub.js","webpack:///./src/base/events/subscriber.js","webpack:///../goat.js/build/goat.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/dasframeworken.ts"],"names":["Pubsub","_subscriptions","name","callback","subscription","subscribe","data","emit","teardown","Object","keys","key","unsubscribe","Subscriber","fn","push","forEach","setTimeout","sub","index","indexOf","splice","i","length","webpackUniversalModuleDefinition","root","factory","exports","module","define","modules","installedModules","__webpack_require__","moduleId","l","call","m","c","value","d","getter","o","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","EQUALITY_REGEX","STRING_REGEX","NOT_REGEX","LOGICAL_OPERATORS","RELATIONAL_OPERATORS","expressionCache","isBoolean","isFunction","includes","getMiddleItem","expression","Math","round","matchExpression","match","isProperty","test","asFunction","val","setFirstInExpression","getFirstInExpression","getRegexMatchArray","regex","input","exec","filter","undefined","shift","getExpression","token","throwError","msg","_i","arguments","Error","join","throwInvalidOperationError","operator","throwInvalidExpressionError","getOperation","operation","left","right","evaluateNot","nots","controller","parserToken","evaluate","operand","processOperand","buildPropertyCaller","fields","lastFunction","last","pop","obj","setField","field","cache","untilTruthy","fns","every","split","caller_1","isNaN","parseInt","processLogicalOperation","leftIndex","rightIndex","processExpression","result","processExplicitPrecedence","subExpression","indexLeftParenthesis","lastIndexOf","slice","indexRightParenthesis","expressionLength","processEquality","operatorFunc","Array","getFields","deleteFromCache","generateRandomKey","floor","random","toString","substring","buildEvaluator","evaluation_builder_1","default_1","_expression","_controller","_parserToken","_fields","_evaluator","default"],"mappings":"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","file":"dasframeworken.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"frameworken\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"frameworken\"] = factory();\n\telse\n\t\troot[\"frameworken\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8e54c70fcca6deb062ed","import { Type } from './types/interfaces';\n\n/**\n * Returns a promise based on the object passed as parameter.\n * It returns a failed or successful promise if it's a boolean.\n * If it's a promise, it returns itself.\n * If it's some other object, it returns a succesfull promise with that obj.\n * @param obj Object to promise\n */\nexport const returnPromise = (obj: any) => {\n    if (typeof obj === 'boolean') {\n        return obj ? Promise.resolve() : Promise.reject({});\n    } else if (typeof obj === 'object' && typeof obj.then === 'function') {\n        return obj;\n    } else {\n        return Promise.resolve(obj);\n    }\n};\n\n/**\n * Instantiates a Type.\n * @param type Type to be instantiated.\n * @param params Parameters to be passed to the constructor.\n */\nexport const instantiateType = <T>(type: Type<T>, ...params: any[]): T => {\n    params = params || [];\n    return new (type.bind.apply(type, [type].concat(params)))();\n};\n\n/**\n * Calls a function given the context if it's valid.\n * @param fn Function to be called.\n * @param ctx \"This\" context in which the function will be called.\n * @param args The arguments for the function.\n */\nexport const call = (fn: Function, ctx: Function, ...args: any[]) => isFunction(fn) && fn.call(ctx, ...args);\n\n/**\n * Checks object is a function.\n * @param fn Function to verify\n */\nexport const isFunction = (fn: any) => typeof fn === 'function';\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/utils.ts","import { Module } from './module';\nimport Container from './di.container';\n\nconst modules: { [key: string]: Frameworken.IModule } = {};\nconst container = new Container();\n\nexport const module = (name: string, options: Frameworken.IModuleOptions) => {\n    let module = modules[name];\n    if (!module) {\n        module = new Module(container, name, options);\n        modules[name] = module;\n    }\n    return module;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/frameworken.ts","import { Pubsub } from './events/pubsub';\nimport * as utils from './component.utils';\nimport * as directivesRegistry from './directives/registry';\nimport Container from './di.container';\nimport { IController, IEventListener, IDirective } from './types/interfaces';\n\nexport class ComponentContainer {\n    private _controller: IController;\n    private _bindings: Pubsub;\n    private _eventListeners: IEventListener[];\n    private _children: ComponentContainer[];\n    private _directives: IDirective[];\n\n    get controller() {\n        return this._controller;\n    }\n\n    constructor(\n        private _container: Container,\n        private _module: Frameworken.IModule, \n        private _component: Frameworken.IComponent\n    ) {\n        this._bindings = new Pubsub();\n        this._eventListeners = [];\n        utils.setupController(_component.controller);\n        this._children = [];\n        this._directives = [];\n    }\n\n    registerEvent(element: Element, event: string, callback: (arg: any) => void) {\n        let listener = this._eventListeners.find((e: IEventListener) => e.element === element && e.event === event);\n        if (!listener) {\n            listener = {\n                element: element,\n                event: event,\n                callback: callback\n            };\n\n            element.addEventListener(event, callback, true);\n            this._eventListeners.push(listener);\n        }\n    }\n\n    initialize(element: Element) {\n        this._controller = this._container.resolve(this._component.controller);\n        // const builder = templateBuilder(this, element);\n        const rendered = this._component.render(this._controller, this);\n        element.appendChild(rendered);\n\n        if (typeof this._controller.onPropertyChanged !== 'function') {\n            this._controller.onPropertyChanged = (name: string) => this._bindings.emit(name, name);\n        }\n        return rendered;\n    }\n\n    registerBinding(property: string, binding: (property: string) => void) {\n        this._bindings.subscribe(property, binding);\n        binding(property);\n    }\n\n    setInwardBinding(element: HTMLInputElement, controllerProperty: string) {\n        this.registerEvent(element, 'input', (change) => {\n            const start = element.selectionStart;\n            const end = element.selectionEnd;\n            setTimeout(() => {\n                this._controller[controllerProperty] = change.target.value;\n                setTimeout(() => element.setSelectionRange(start, end));\n            });\n        });\n    }\n    \n    setEvent(element: Element, event: string, callback: (controller: IController, $event: Event) => any) {\n        this.registerEvent(element, event, (arg) => callback(this._controller, arg));\n    }\n\n    instantiateChildComponent(name: string, parent: Element) {\n        const component = this._module.getComponent(name);\n        if (!component) return;\n\n        const child = new ComponentContainer(this._container, this._module, component);\n        this._children.push(child);\n        return child.initialize(parent);\n    }\n\n    instantiateDirective(name: string, value: any, parent: Element, contextFn: (context: any) => Element) {\n        const directive = directivesRegistry.find(name);\n        if (!directive) return false;\n        const instance = directivesRegistry.instantiate(directive, parent, this._controller, this._bindings, value, contextFn);\n        this._directives.push(instance);\n        return true;\n    }\n\n    teardown() {\n        while (this._children.length) {\n            const child = this._children[0];\n            child.teardown();\n            this._children.splice(0, 1);\n        }\n\n        delete this._children;\n\n        this._bindings.teardown();\n        \n        while (this._eventListeners.length) {\n            const listener = this._eventListeners[0];\n            listener.element.removeEventListener(listener.event, listener.callback);\n            this._eventListeners.splice(0, 1);\n        }\n        delete this._eventListeners;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/component.container.ts","export const setupController = (controllerType: Function) => {\n    controllerType.prototype._notifyChange = function (propertyName: string) {\n        if (typeof this.onPropertyChanged === 'function') {\n            setTimeout(() => {\n                this.onPropertyChanged(propertyName);\n            }, 1);\n        }\n\n        return this;\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/component.utils.ts","import { Type, ITypeRegistry } from './types/interfaces';\nimport * as utils from './utils';\n\nconst getName = <T>(type: Type<T> | string) => isString(type) ? type : type.name;\nconst isString = <T>(obj: Type<T> | string): obj is string => typeof obj === 'string';\nconst throwException = (text: string) => { throw new Error(text) };\n\n/**\n * Represents the container\n */\nexport default class {\n    private _typeRegistry: ITypeRegistry;\n\n    public get typeRegistry() {\n        return this._typeRegistry;\n    }\n\n    constructor() {\n        this._typeRegistry = {};\n    }\n    \n    /**\n     * Instantiates a type that is registered in the container with its dependencies.\n     * @param type Type that will be instantiated, it can be the type itself or the name.\n     */\n    public getInstance<T>(type: Type<T> | string) {\n        const name = getName(type);\n        const registered = this._typeRegistry[name];\n\n        if (!registered) throwException(`Type (${name}) not registered`);\n\n        if (!registered.instance) {\n            registered.instance = this.resolve(registered.type);\n        }\n        return registered.instance;\n    }\n\n    /**\n     * Instantiates any type and tries to resolve dependencies that are registered in the container.\n     * @param type The type to be resolved\n     */\n    public resolve<T>(type: Type<T>) {\n        const dependencies = type.metadata && type.metadata.dependencies || type.dependencies;\n\n        if (!dependencies) {\n            return utils.instantiateType(type);\n        }\n\n        const instances = dependencies.map((d) => this.getInstance(d as Type<T>));\n        return utils.instantiateType(type, ...instances);\n    }\n\n    /**\n     * Registers a type in the container.\n     * @param type Type to be registered\n     */\n    public registerType <T>(type: Type<T>) {\n        const name = getName(type);\n        const registered = this._typeRegistry[name];\n        if (!registered) {\n            this._typeRegistry[name] = { type: type, instance: undefined };\n        }\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/base/di.container.ts","import { IController, IDirective } from './../types/interfaces';\nimport ExpressionParser from 'goatjs';\nimport { Pubsub } from \"../events/pubsub\";\n\nconst replaceElement = (oldEl: Element | Comment, newEl: Element | Comment) => oldEl.parentNode.replaceChild(newEl, oldEl);\n\nexport class IfDirective implements IDirective {\n\n    static readonly metadata = {\n        selector: 'if'\n    }\n\n    private _placeholder: Comment;\n    private _expression: ExpressionParser;\n\n    private _lastElement: Element;\n\n    constructor(\n        private _parent: Element, \n        private _controller: IController, \n        private _evtAggregator: Pubsub,\n        private _context: (context: any) => Element\n    ) {\n    }\n\n    private _processEvaluation(result: boolean) {\n        if (!this._placeholder) {\n            this._placeholder = document.createComment('@if');\n        }\n        if (result === true) {\n            this._lastElement = this._context({});\n            replaceElement(this._placeholder, this._lastElement);\n        } else {\n            if (this._lastElement) {\n                replaceElement(this._lastElement, this._placeholder);\n            } else {\n                this._parent.appendChild(this._placeholder);\n            }\n        }\n    }\n\n    private _onFieldChanged(key: string) {\n        const result = this._expression.evaluate();\n        this._processEvaluation(result);          \n    }\n\n    public setup(value: string) {\n        if (!this._expression) {\n            this._expression = new ExpressionParser(value, this._controller);            \n        }\n\n        const result = this._expression.evaluate();\n\n        this._expression.fields.forEach((field: string) => \n            this._evtAggregator.subscribe(field, (key: string) => \n                this._onFieldChanged(key)));\n        \n        this._processEvaluation(result);          \n    }\n\n    public teardown() {\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/directives/if.directive.ts","import { IController, IDirective, Type } from './../types/interfaces';\nimport { IfDirective } from './if.directive';\nimport { RepeatDirective } from './repeat.directive';\nimport * as utils from './../utils';\nimport { Pubsub } from \"../events/pubsub\";\n\nconst registry = [\n    IfDirective,\n    RepeatDirective\n];\nconst PREFIX = '@';\nconst getName = (name: string) => PREFIX + name;\n\nexport const find = (name: string) => registry.find((d: Type<any>) => getName(d.metadata.selector) === name);\nexport const instantiate = (directive: Type<IDirective>, parent: Element, controller: IController, pubsub: Pubsub, value: string, context: (context: any) => Element) => {\n    const instance = utils.instantiateType(directive, ...[parent, controller, pubsub, context]);\n    instance.setup(value);\n    return instance;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/base/directives/registry.ts","import { IController } from './../types/interfaces';\n\nexport class RepeatDirective {\n    static get metadata() {\n        return {\n            selector: 'repeat'\n        };\n    }\n\n    constructor(element: Element, controller: IController) {\n\n    }\n\n    setup(value: string) {\n\n    }\n\n    teardown() {\n        \n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/directives/repeat.directive.ts","// import { componentFactory } from './component.factory';\nimport { ComponentContainer } from './component.container';\nimport { Router } from './router';\nimport * as utils from './utils';\nimport Container from './di.container';\nimport { Type } from './types/interfaces';\n\nconst registerTypes = (container: Container, types: Type<any>[]) => types.forEach((type) => container.registerType(type));\n\nexport class Module {\n    private _rootComponent: Frameworken.IComponent;\n    private _preLoad: <T>() => Promise<T> | boolean | void;\n    private _router: Router;\n    private _routeComponentContainer: ComponentContainer;\n    private _components: { [key:string]: Frameworken.IComponent };\n    private _rootComponentContainer: ComponentContainer;\n\n    get rootComponent() {\n        return this._rootComponent;\n    }\n\n    constructor(\n        private _container: Container,\n        private _name: string, \n        options: Partial<Frameworken.IModuleOptions>\n    ) {\n        options = options || {};\n        this._name = name;\n        this._rootComponent = options.rootComponent;\n        this._preLoad = options.preLoad;\n\n        if (options.types) registerTypes(this._container, options.types);\n        if (options.components) this._registerComponents(options.components);\n        if (options.routes) this._registerRoutes(options.routes);\n    }\n\n    _registerRoutes(routes: Frameworken.IRoute[]) {\n        this._router = new Router(routes);\n        this._router.onRouteChanging = (oldRoute, newRoute) => {\n            if (this._routeComponentContainer) {\n                this._routeComponentContainer.teardown();\n            }\n        };\n        this._router.onRouteChanged = (route) => {\n            const outlet: Element = document.getElementsByTagName('router-outlet')[0];\n            if (route.root && outlet) {\n                this._routeComponentContainer = this._buildComponent(route.root, outlet);\n            }\n        };\n    }\n\n    _registerComponents(components: any[]) {\n        this._components = {};\n        components.forEach((c) => { \n            if (typeof c === 'function' && typeof c.metadata.template) {    \n                this._components[c.metadata.selector] = c;\n            } else if (typeof c === 'object' && typeof c.render === 'function') {\n                this._components[c.selector] = c;\n            }\n        });\n    }\n\n    _buildComponent(type: Frameworken.IComponent, element: Element) {\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n\n        const container = new ComponentContainer(this._container, this, type);\n        container.initialize(element);\n        return container;\n    }\n\n    getComponent(name: string) {\n        return this._components[name];\n    }\n\n    deploy(element: HTMLElement) {\n        const preLoad = this._preLoad && this._preLoad();\n        utils.returnPromise(preLoad).then(() => {\n            if (this._rootComponent) {\n                this._rootComponentContainer = this._buildComponent(this._rootComponent, element);\n            }// else if (this._routes) {\n            //     this._initializeRouting(element);\n            // }\n        });\n    } \n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/module.ts","import * as utils from './utils';\n\nexport class Router {\n    private _routes: Frameworken.IRoute[];\n    private _currentRoute: Frameworken.IRoute;\n    private _onChange: (eventArgs: HashChangeEvent) => void;\n\n    public onRouteChanging: (oldRoute: Frameworken.IRoute, newRoute: Frameworken.IRoute) => void;\n    public onRouteChanged: (currentRoute: Frameworken.IRoute) => void;\n\n    constructor(routes: Frameworken.IRoute[]) {\n        this._routes = routes;\n        this._currentRoute = null;\n        this._onChange = (eventArgs) => {\n            const oldUrl = eventArgs.oldURL;\n            const newUrl = eventArgs.newURL;\n            const url = this._getHash(newUrl) || location.hash.slice(1) || '/';\n            const route = this._routes.find((r: Frameworken.IRoute) => r.path === url);\n            if (!route) return;\n\n            const resolve = route.resolve && route.resolve(route);\n\n            utils.returnPromise(resolve)\n                .then(() => {\n                    if (typeof this.onRouteChanging === 'function') {\n                        this.onRouteChanging(this._currentRoute, route);\n                    }\n                    this._currentRoute = route;\n                    if (typeof this.onRouteChanged === 'function') {\n                        this.onRouteChanged(this._currentRoute);\n                    }\n                })\n                .catch((ex: any) => {\n                    debugger;\n                    console.error(ex);\n                    history.replaceState({}, route.path, '#' + this._getHash(oldUrl));\n                });\n        };\n        window.addEventListener('hashchange', this._onChange);\n        window.addEventListener('load', this._onChange);\n    }\n\n    _getHash(url: string) {\n        if (!url) return url;\n        const indexHash = url.indexOf('#') + 1;\n        return url.substring(indexHash, url.length);\n    }\n\n    destroy() {\n        window.removeEventListener('hashchange', this._onChange);\n        window.removeEventListener('load', this._onChange);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/router.ts","import { Subscriber } from './subscriber';\n\nexport class Pubsub {\n    constructor () {\n        this._subscriptions = {};\n    }\n\n    subscribe(name, callback) {\n        let subscription = this._subscriptions[name];\n        if (!subscription) {\n            this._subscriptions[name] = subscription = new Subscriber();\n        }\n        subscription.subscribe(callback);\n    }\n\n    emit(name, data) {\n        let subscription = this._subscriptions[name];\n        if (subscription) {\n            subscription.emit(data);\n        }\n    }\n\n    get(name) {\n        return this._subscriptions[name];\n    }\n\n    unsubscribe(name) {\n        let subscription = this._subscriptions[name];\n        if (subscription) {\n            subscription.teardown();\n        }\n        delete this._subscriptions[name];\n    }\n\n    teardown() {\n        for (let key of Object.keys(this._subscriptions)) {\n            this.unsubscribe(key);\n        }\n        delete this._subscriptions;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/events/pubsub.js","export class Subscriber {\n    constructor() {\n        this._subscriptions = [];\n    }\n\n    subscribe(fn) {\n        if (this._subscriptions) {\n            this._subscriptions.push(fn);\n        } \n    }\n\n    emit(data) {\n        this._subscriptions.forEach(sub => { \n            setTimeout(() => sub(data), 1);\n        });\n    }\n\n    remove(fn) {\n        const index = this._subscriptions.indexOf(fn);\n        this._subscriptions.splice(index, 1);\n    }\n\n    teardown() {\n        for(let i = this._subscriptions.length - 1; i--;){\n            this._subscriptions.splice(i, 1);\n        }\n        delete this._subscriptions;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base/events/subscriber.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"goat\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"goat\"] = factory();\n\telse\n\t\troot[\"goat\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* Constants\n----------------------------------------------------------------*/\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EQUALITY_REGEX = /^\\s*([^\\s&|\\'\"\\(\\)]+|[\"'][^'\"]+[\"'])\\s*$|^\\s*([^\\s&|\\'\"\\(\\)]+|[\"'][^'\"]*[\"'])\\s*([^'\"\\w\\s|&]{1,3})\\s*([^\\s&|\\'\"\\(\\)]+|[\"'][^'\"]*[\"'])\\s*$/;\nvar STRING_REGEX = /^['\"](.*)['\"]$/;\nvar NOT_REGEX = /^\\s*([!]+)\\s*(\\w+)\\s*$/;\nvar LOGICAL_OPERATORS = ['&&', '||'];\nvar RELATIONAL_OPERATORS = ['==', '!=', '===', '!==', '!', '>=', '<=', '>', '<'];\n/* Cache Variables\n----------------------------------------------------------------*/\nvar expressionCache = {};\n/* Support Functions\n----------------------------------------------------------------*/\nvar isBoolean = function (value) { return ['true', 'false'].indexOf(value) > -1; };\nvar isFunction = function (o) { return typeof o === 'function'; };\nvar includes = function (o, value) { return o.indexOf(value) > -1; };\nvar getMiddleItem = function (expression) { return expression[Math.round((expression.length - 1) / 2)]; };\nvar matchExpression = function (expression) {\n    return expression.match(/([&|]{2})|([\\(\\)])|([^\\s&|\\'\"\\(\\)]+|[\"'].+[\"'])\\s*([^\\w\\s|&\\(\\)]{1,3})?\\s*([^\\s&|\\(\\)]+)?/g);\n};\nvar isProperty = function (expression) { return /^\\s*([a-z]\\w+)(\\.[a-z]\\w+)*\\s*$/g.test(expression); };\nvar asFunction = function (val) { return isFunction(val) ? val() : val; };\nvar setFirstInExpression = function (expression, value) { return expression[0] = value; };\nvar getFirstInExpression = function (expression) { return expression[0]; };\nvar getRegexMatchArray = function (regex, input) {\n    var match = regex.exec(input) || [];\n    if (match.length === 0)\n        return;\n    match = match.filter(function (m) { return m !== undefined; });\n    match.shift();\n    return match;\n};\nvar getExpression = function (token) { return expressionCache[token].expression; };\nvar throwError = function () {\n    var msg = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        msg[_i] = arguments[_i];\n    }\n    throw new Error(msg.join(''));\n};\nvar throwInvalidOperationError = function (operator, token) { return throwError(\"Operator [\" + operator + \"] is not valid in expression [\" + getExpression(token) + \"]\"); };\nvar throwInvalidExpressionError = function (token) { return throwError(\"Invalid expression [\" + getExpression(token) + \"]\"); };\nvar getOperation = function (operation, left, right) { return {\n    '==': function () { return asFunction(left) == asFunction(right); },\n    '!=': function () { return asFunction(left) != asFunction(right); },\n    '===': function () { return asFunction(left) === asFunction(right); },\n    '!==': function () { return asFunction(left) !== asFunction(right); },\n    '<=': function () { return asFunction(left) <= asFunction(right); },\n    '>=': function () { return asFunction(left) >= asFunction(right); },\n    '<': function () { return asFunction(left) < asFunction(right); },\n    '>': function () { return asFunction(left) > asFunction(right); },\n    '&&': function () { return asFunction(left) && asFunction(right); },\n    '||': function () { return asFunction(left) || asFunction(right); }\n}[operation]; };\nvar evaluateNot = function (nots, value, controller, parserToken) {\n    var evaluate;\n    nots.shift();\n    if (nots.length) {\n        evaluate = evaluateNot(nots, value, controller, parserToken);\n    }\n    var operand = processOperand(value, controller, parserToken);\n    return function () { return !asFunction(evaluate || operand); };\n};\nvar buildPropertyCaller = function (fields, lastFunction) {\n    var last = fields[fields.length - 1];\n    fields.pop();\n    // function that evaluates current property\n    var fn;\n    if (!lastFunction) {\n        fn = function (obj) { return obj[last]; };\n    }\n    else {\n        fn = function (obj) { return lastFunction(obj[last]); };\n    }\n    if (fields.length) {\n        return buildPropertyCaller(fields, fn);\n    }\n    return fn;\n};\nvar setField = function (field, parserToken) {\n    var cache = expressionCache[parserToken].fields;\n    if (!cache) {\n        cache = expressionCache[parserToken].fields = [];\n    }\n    cache.push(field);\n};\n/**\n * Executes functions in series until one of them returns a truthy value.\n * If it does, the function returns true.\n * @param fns Functions to be executed\n */\nvar untilTruthy = function () {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return !fns.every(function (fn) { return !fn(); });\n};\n/* Processing Functions\n----------------------------------------------------------------*/\nvar processOperand = function (m, controller, parserToken) {\n    var match;\n    if ((match = getRegexMatchArray(NOT_REGEX, m))) {\n        var nots = match[0].split('');\n        return evaluateNot(nots, match[1], controller, parserToken);\n    }\n    else if (isBoolean(m)) {\n        return m === 'true';\n    }\n    else if (isProperty(m)) {\n        var caller_1 = buildPropertyCaller(m.split('.'));\n        setField(m, parserToken);\n        return function () { return caller_1(controller); };\n    }\n    else if (!isNaN(m)) {\n        return parseInt(m);\n    }\n    else if ((match = STRING_REGEX.exec(m))) {\n        return getMiddleItem(match);\n    }\n    throwInvalidExpressionError(parserToken);\n};\nvar processLogicalOperation = function (operation, expression, controller, parserToken) {\n    var index = -1;\n    var leftIndex = 0;\n    var rightIndex = 0;\n    if ((index = expression.indexOf(operation)) > -1 &&\n        (expression[leftIndex = index - 1] !== ')') &&\n        (expression[rightIndex = index + 1] !== '(')) {\n        var left = processExpression(expression[leftIndex], controller, parserToken);\n        var right = processExpression(expression[rightIndex], controller, parserToken);\n        var result = getOperation(operation, getFirstInExpression(left), getFirstInExpression(right));\n        expression[leftIndex] = result;\n        expression.splice(index, 2);\n        return result;\n    }\n};\nvar processExplicitPrecedence = function (expression, controller, parserToken) {\n    var subExpression = expression;\n    var indexLeftParenthesis = expression.lastIndexOf('(');\n    if (indexLeftParenthesis > -1) {\n        subExpression = subExpression.slice(indexLeftParenthesis + 1, subExpression.length);\n        var indexRightParenthesis = subExpression.indexOf(')');\n        subExpression = subExpression.slice(0, indexRightParenthesis);\n        var expressionLength = subExpression.length;\n        var result = processExpression(subExpression, controller, parserToken);\n        expression[indexLeftParenthesis] = result;\n        expression.splice(indexLeftParenthesis + 1, expressionLength + 1);\n        return result;\n    }\n};\nvar processEquality = function (expression, controller, parserToken) {\n    var match;\n    var operatorFunc;\n    if (expression.length === 1 && (match = getRegexMatchArray(EQUALITY_REGEX, getFirstInExpression(expression)))) {\n        var left = processOperand(match[0], controller, parserToken);\n        var right = match[2];\n        if (right) {\n            right = processOperand(match[2], controller, parserToken);\n        }\n        var operation = match[1];\n        if (isFunction(left) && !right && !operation) {\n            operatorFunc = left;\n        }\n        else {\n            operatorFunc = getOperation(match[1], left, right);\n        }\n        if (!operatorFunc)\n            throwInvalidOperationError(match[1], parserToken);\n        setFirstInExpression(expression, operatorFunc);\n        return operatorFunc;\n    }\n};\nvar processExpression = function (expression, controller, parserToken) {\n    if (!(expression instanceof Array)) {\n        expression = [expression];\n    }\n    if (expression.length === 3 && !includes(LOGICAL_OPERATORS, getMiddleItem(expression))) {\n        throwError(\"Invalid logical operator [\" + getMiddleItem(expression) + \"] in expression [\" + getExpression(parserToken) + \"]\");\n    }\n    if (!untilTruthy(function () { return processEquality(expression, controller, parserToken); }, function () { return processExplicitPrecedence(expression, controller, parserToken); }, function () { return processLogicalOperation('&&', expression, controller, parserToken); }, function () { return processLogicalOperation('||', expression, controller, parserToken); }) && (expression.length % 2) === 1 && !isFunction(getFirstInExpression(expression))) {\n        throwInvalidExpressionError(parserToken);\n    }\n    if (expression.length > 1 || !isFunction(getFirstInExpression(expression))) {\n        return processExpression(expression, controller, parserToken);\n    }\n    else {\n        return expression;\n    }\n};\n/* Exported Functions\n----------------------------------------------------------------*/\nexports.getFields = function (token) { return expressionCache[token].fields; };\nexports.deleteFromCache = function (token) { return delete expressionCache[token]; };\nexports.generateRandomKey = function () { return Math.floor((1 + Math.random()) * 0x100000000000000).toString(16).substring(1); };\nexports.buildEvaluator = function (expression, controller, parserToken) {\n    var match = matchExpression(expression) || [];\n    expressionCache[parserToken] = { expression: expression };\n    if (match.length % 2 === 0) {\n        throwInvalidExpressionError(parserToken);\n    }\n    var result = processExpression(match, controller, parserToken);\n    return getFirstInExpression(result);\n};\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar evaluation_builder_1 = __webpack_require__(0);\n/**\n * Expression parser class\n */\nvar default_1 = (function () {\n    /**\n     * Creates new instance of the ExpressionParser.\n     * @param _expression Expression to be parsed\n     * @param _controller Object with fields that will be evaluated\n     */\n    function default_1(_expression, _controller) {\n        this._expression = _expression;\n        this._controller = _controller;\n        this._parserToken = evaluation_builder_1.generateRandomKey();\n    }\n    Object.defineProperty(default_1.prototype, \"fields\", {\n        /**\n         * Object fields that were used in the expression.\n         */\n        get: function () {\n            return this._fields;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(default_1.prototype, \"currentEvaluator\", {\n        /**\n         * Returns the current evaluator function without triggering it like the evaluate() function does.\n         */\n        get: function () {\n            return this._evaluator;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Evaluates current instance of the Expression Parser and returns\n     * a boolean value based on the expression that was passed in the constructor.\n     */\n    default_1.prototype.evaluate = function () {\n        if (!this._evaluator) {\n            this._evaluator = evaluation_builder_1.buildEvaluator(this._expression, this._controller, this._parserToken);\n            this._fields = evaluation_builder_1.getFields(this._parserToken);\n            evaluation_builder_1.deleteFromCache(this._parserToken);\n        }\n        return this._evaluator();\n    };\n    return default_1;\n}());\nexports.default = default_1;\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=goat.js.map\n\n\n// WEBPACK FOOTER //\n// ../goat.js/build/goat.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 25\n// module chunks = 0","import * as frameworken from './base/frameworken';\n\nmodule.exports = frameworken;\n\n// (function (root, factory) {\n//     if (typeof exports === 'object' && exports) {\n//         module.exports = factory();\n//     } else if (typeof define === 'function' && define.amd) {\n//         define('dasframeworken', [], factory);\n//     } else {\n//         root['frameworken'] = factory();   \n//     }\n// } (this, function () {\n//     return new Frameworken();\n// }));\n\n\n// WEBPACK FOOTER //\n// ./src/dasframeworken.ts"],"sourceRoot":""}