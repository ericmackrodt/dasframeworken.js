!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("",[],t):"object"==typeof exports?exports[""]=t():e[""]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Frameworken=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(18),u=n(15);t.Frameworken=function(){function e(){i(this,e),this._modules={},this._di=new u.DIContainer}return r(e,[{key:"module",value:function e(t,n){var e=this._modules[t];return e||(e=new o.Module(this._di,t,n),this._modules[t]=e),e}}]),e}()},,,,,,,,,,,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentContainer=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(20),s=n(16),a=n(14),c=i(a);t.ComponentContainer=function(){function e(t,n){r(this,e),this._bindings=new s.Pubsub,this._eventListeners=[],this._module=t,c.setupController(n.controller),this._component=n,this._chilren=[]}return o(e,[{key:"_registerEvent",value:function(e,t,n){var i=this._eventListeners.find(function(n){return n.element===e&&n.event===t});i||(i={element:e,event:t,callback:n},e.addEventListener(t,n,!0),this._eventListeners.push(i))}},{key:"initialize",value:function(e){this._controller=this._module.container.resolve(this._component.controller),this._templateBuilder=new u.TemplateBuilder(this,e),this._component.render(this._templateBuilder)}},{key:"setBinding",value:function(e,t,n){var i=this;this._bindings.subscribe(n,function(n){return e[t]=i._controller[n]}),"function"!=typeof this._controller.onPropertyChanged&&(this._controller.onPropertyChanged=function(e){return i._bindings.emit(e,e)}),e[t]=this._controller[n]}},{key:"setInwardBinding",value:function(e,t){var n=this;this._registerEvent(e,"input",function(i){setTimeout(function(){var r=e.selectionStart,o=e.selectionEnd;n._controller[t]=i.target.value,e.setSelectionRange(r,o)})})}},{key:"setEvent",value:function(e,t,n){var i=this,r=n.replace("()","");this._registerEvent(e,t.replace("trigger:",""),function(e){i._controller[r](e)})}},{key:"instantiateChildComponent",value:function(t,n){var i=this._module.getComponent(t);if(!i)return!1;var r=new e(this._module,i);return this._chilren.push(r),r.initialize(n),!0}},{key:"teardown",value:function(){for(;this._chilren.length;){this._chilren[0].teardown(),this._chilren.splice(0,1)}for(delete this._chilren,this._bindings.teardown();this._eventListeners.length;){var e=this._eventListeners[0];e.element.removeEventListener(e.event,e.callback),this._eventListeners.splice(0,1)}delete this._eventListeners,this._instance&&"function"==typeof this._instance.onTeardown&&this._instance.teardown()}}]),e}()},function(e,t,n){"use strict";function i(e){function t(e,t){e.forEach(function(e){return e.element[e.elProp]=t})}function n(e,n,i,r){var u=o[r];u||(u=o[r]=[]),u.push({element:e,elProp:n}),i.onPropertyChanged=function(e){setTimeout(function(){t(o[e],i[e])})}}function i(e,t,n){e.addEventListener("input",function(e){var i=this;setTimeout(function(){var r=i.selectionStart,o=i.selectionEnd;t[n]=e.target.value,i.setSelectionRange(r,o)})},!0)}function r(t,o,u){var s=e[t.localName];if(s&&!t.innerHTML)return t.innerHTML=s.metadata.template,void r(t,u(s),u);/^{{\w*}}$/g.test(t.innerText)&&(n(t,"innerText",o,t.innerText.replace("{{","").replace("}}","")),t.innerText="");var a=function(e){return function(t){return o[e](t)}};if(t.attributes&&t.attributes.length)for(var c in t.attributes){var l=t.attributes[c];if("on:click"===l.name){var f=l.value.replace("()","");t.onclick=a(f)}"binding"===l.name&&(n(t,"value",o,l.value),i(t,o,l.value))}if(t.childNodes&&t.childNodes.length)for(var c in t.childNodes)r(t.childNodes[c],o,u)}var o={};return{processElement:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.componentFactory=i},function(e,t,n){"use strict";function i(e){e.prototype._notifyChange=function(e){var t=this;return"function"==typeof this.onPropertyChanged&&setTimeout(function(){t.onPropertyChanged(e)},1),this}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupController=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.DIContainer=function(){function e(){i(this,e),this._typeRegistry={}}return r(e,[{key:"_getName",value:function(e){return e.name}},{key:"resolve",value:function(e){var t=this,n=e.metadata&&e.metadata.dependencies||e.dependencies;if(!n)return new(e.bind.apply(e,[e]));var i=n.map(function(e){return t.getInstance(e)});return new(e.bind.apply(e,[e].concat(i)))}},{key:"getInstance",value:function(e){var t=this._getName(e),n=this._typeRegistry[t];return n.instance||(n.instance=this.resolve(n.type)),n.instance}},{key:"registerType",value:function(e){var t=this._getName(e);this._typeRegistry[t]||(this._typeRegistry[t]={type:e,instance:null})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pubsub=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(17);t.Pubsub=function(){function e(){i(this,e),this._subscriptions={}}return r(e,[{key:"subscribe",value:function(e,t){var n=this._subscriptions[e];n||(this._subscriptions[e]=n=new o.Subscriber),n.subscribe(t)}},{key:"emit",value:function(e,t){var n=this._subscriptions[e];n&&n.emit(t)}},{key:"get",value:function(e){return this._subscriptions[e]}},{key:"unsubscribe",value:function(e){var t=this._subscriptions[e];t&&t.teardown(),delete this._subscriptions[e]}},{key:"teardown",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=Object.keys(this._subscriptions)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.unsubscribe(o)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}delete this._subscriptions}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.Subscriber=function(){function e(){i(this,e),this._subscriptions=[]}return r(e,[{key:"subscribe",value:function(e){this._subscriptions&&this._subscriptions.push(e)}},{key:"emit",value:function(e){this._subscriptions.forEach(function(t){setTimeout(function(){return t(e)},1)})}},{key:"remove",value:function(e){var t=this._subscriptions.indexOf(e);this._subscriptions.splice(t,1)}},{key:"teardown",value:function(){for(var e=this._subscriptions.length-1;e--;)this._subscriptions.splice(e,1);delete this._subscriptions}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Module=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=(n(13),n(12)),s=n(19);t.Module=function(){function e(t,n,r){i(this,e),this._container=t,r=r||{},this._name=n,this._rootComponent=r.rootComponent,r.types&&this._registerTypes(r.types),r.components&&this._registerComponents(r.components),r.routes&&this._registerRoutes(r.routes)}return o(e,[{key:"rootComponent",get:function(){return this._rootComponent}},{key:"container",get:function(){return this._container}}]),o(e,[{key:"_registerRoutes",value:function(e){var t=this;this._router=new s.Router(e),this._router.onRouteChanging=function(e,n){t._routeComponentContainer&&t._routeComponentContainer.teardown()},this._router.onRouteChanged=function(e){var n=document.getElementsByTagName("router-outlet")[0];e.root&&n&&(t._routeComponentContainer=t._buildComponent(e.root,n))}}},{key:"_registerTypes",value:function(e){var t=this;e.forEach(function(e){t._container.registerType(e)})}},{key:"_registerComponents",value:function(e){var t=this;this._components={},e.forEach(function(e){"function"==typeof e&&r(e.metadata.template)?t._components[e.metadata.selector]=e:"object"===(void 0===e?"undefined":r(e))&&"function"==typeof e.render&&(t._components[e.selector]=e)})}},{key:"_buildComponent",value:function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);var n=new u.ComponentContainer(this,e);return n.initialize(t),n}},{key:"_initializeRouting",value:function(e){var t=this;window.addEventListener("hashchange",function(){return t._router(e)}),window.addEventListener("load",function(){return t._router(e)})}},{key:"getComponent",value:function(e){return this._components[e]}},{key:"deploy",value:function(e){this._rootComponent?this._rootComponentContainer=this._buildComponent(this._rootComponent,e):this._routes&&this._initializeRouting(e)}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.Router=function(){function e(t){var n=this;i(this,e),this._routes=t,this._currentRoute=null,this._onChange=function(){var e=location.hash.slice(1)||"/",t=n._routes.find(function(t){return t.path===e});t&&("function"==typeof n.onRouteChanging&&n.onRouteChanging(n._currentRoute,t),n._currentRoute=t,"function"==typeof n.onRouteChanged&&n.onRouteChanged(n._currentRoute))},window.addEventListener("hashchange",this._onChange),window.addEventListener("load",this._onChange)}return r(e,[{key:"destroy",value:function(){window.removeEventListener("hashchange",this._onChange),window.removeEventListener("load",this._onChange)}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.TemplateBuilder=function(){function e(t,n,r,o){i(this,e),this._subscriptions=[],this._componentContainer=t,this._baseElement=n,this._controller=r}return r(e,[{key:"createRoot",value:function(e,t){parent=this._baseElement;var n=document.createElement(e);return parent.appendChild(n),n}},{key:"createElement",value:function(e,t){if(!this._componentContainer.instantiateChildComponent(e,t)){t=t||this._baseElement;var n=document.createElement(e);return t.appendChild(n),n}}},{key:"setAttribute",value:function(e,t,n){e.startsWith("trigger:")?this._componentContainer.setEvent(n,e,t):"binding"===e?(this._componentContainer.setBinding(n,"value",t),this._componentContainer.setInwardBinding(n,t)):n.setAttribute(e,t)}},{key:"setText",value:function(e,t){var n=document.createTextNode(e);t.appendChild(n)}},{key:"boundText",value:function(e,t){var n=document.createTextNode("");t.appendChild(n),this._componentContainer.setBinding(n,"textContent",e)}}]),e}()},,function(e,t,n){"use strict";var i=n(1);!function(){window.frameworken=new i.Frameworken}()}])});